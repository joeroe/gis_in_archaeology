<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>GIS in Archaeology [HS2022] - Georeferencing &amp; digitising</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./field_data.html" rel="next">
<link href="./data_sources.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">GIS in Archaeology [HS2022]</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./information.html">
 <span class="menu-text">Information</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tutorials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="./introduction.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Making maps</li>
        <li>
    <a class="dropdown-item" href="./theme_maps.html">
 <span class="dropdown-text">Thematic maps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./topographic_maps.html">
 <span class="dropdown-text">Topographic maps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./layout.html">
 <span class="dropdown-text">Map layout</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./design.html">
 <span class="dropdown-text">Map design</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Geospatial data</li>
        <li>
    <a class="dropdown-item" href="./data_management.html">
 <span class="dropdown-text">Data management</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./data_sources.html">
 <span class="dropdown-text">Obtaining geospatial data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./digitising.html">
 <span class="dropdown-text">Georeferencing &amp; digitising</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./field_data.html">
 <span class="dropdown-text">Field data collection</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Spatial analysis</li>
        <li>
    <a class="dropdown-item" href="./interpolation.html">
 <span class="dropdown-text">Interpolation &amp; density estimation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./raster_analysis.html">
 <span class="dropdown-text">Raster analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./movement_models.html">
 <span class="dropdown-text">Modelling movement</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./predictive_models.html">
 <span class="dropdown-text">Predictive modelling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./review.html">
 <span class="dropdown-text">Review</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./bibliography.html">
 <span class="menu-text">Bibliography &amp; Further Reading</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Georeferencing &amp; digitising</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Making maps</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./theme_maps.html" class="sidebar-item-text sidebar-link">Thematic maps</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./topographic_maps.html" class="sidebar-item-text sidebar-link">Topographic maps</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./layout.html" class="sidebar-item-text sidebar-link">Map layout</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./design.html" class="sidebar-item-text sidebar-link">Map design</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Geospatial data</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_management.html" class="sidebar-item-text sidebar-link">Data management</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_sources.html" class="sidebar-item-text sidebar-link">Obtaining geospatial data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./digitising.html" class="sidebar-item-text sidebar-link active">Georeferencing &amp; digitising</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./field_data.html" class="sidebar-item-text sidebar-link">Field data collection</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Spatial analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interpolation.html" class="sidebar-item-text sidebar-link">Interpolation &amp; density estimation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./raster_analysis.html" class="sidebar-item-text sidebar-link">Raster analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./movement_models.html" class="sidebar-item-text sidebar-link">Modelling movement</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./predictive_models.html" class="sidebar-item-text sidebar-link">Predictive modelling</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./review.html" class="sidebar-item-text sidebar-link">Review</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link active" data-scroll-target="#prerequisites">Prerequisites</a></li>
  <li><a href="#practical" id="toc-practical" class="nav-link" data-scroll-target="#practical">Practical</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#georeferencing" id="toc-georeferencing" class="nav-link" data-scroll-target="#georeferencing">Georeferencing</a></li>
  <li><a href="#digitising" id="toc-digitising" class="nav-link" data-scroll-target="#digitising">Digitising</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/joeroe/gis_in_archaeology/blob/main/digitising.qmd" class="toc-action">View source</a></p><p><a href="https://github.com/joeroe/gis_in_archaeology/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Georeferencing &amp; digitising</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Much valuable geospatial data remains in analogue format, e.g.&nbsp;printed maps or lists of coordinates. This session will cover the processes of georeferencing (assigning explicit geographic coordinates to scanned images) and digitising (creating vector geospatial layers from images and other reference material).</p>
<section id="prerequisites" class="level2">
<h2 class="anchored" data-anchor-id="prerequisites">Prerequisites</h2>
<ul>
<li><a href="https://tube.switch.ch/videos/ced6a6f9">Georeferencing a scanned map</a> (Video, Martin Hinz)</li>
<li><a href="https://tube.switch.ch/videos/51fb9bf6">Digitising objects from georeferenced maps</a> (Video, Martin Hinz)</li>
</ul>
</section>
<section id="practical" class="level2">
<h2 class="anchored" data-anchor-id="practical">Practical</h2>
<p>We will georeference and digitise two datasets from Islay that will be useful in our later modelling work: the location of sites, and a reconstruction of the past coastline.</p>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<ul>
<li><a href="islay/islay_sites.jpg">islay_sites.jpg</a> – map of Mesolithic and later prehistoric sites on Islay (<a href="bibliography.html#mithen2000">Mithen et al.&nbsp;2000</a>, fig.&nbsp;4.2.15)</li>
<li>Maps of reconstructed past coastlines of Islay (<a href="bibliography.html#mithen2000">Mithen et al.&nbsp;2000</a>, fig.&nbsp;3.4.14):
<ul>
<li><a href="islay/islay_coast_7000bp.jpg">islay_coast_7000bp.jpg</a></li>
<li><a href="islay/islay_coast_9000bp.jpg">islay_coast_9000bp.jpg</a></li>
<li><a href="islay/islay_coast_11000bp.jpg">islay_coast_11000bp.jpg</a></li>
<li><a href="islay/islay_coast_13000bp.jpg">islay_coast_13000bp.jpg</a></li>
</ul></li>
</ul>
</section>
<section id="georeferencing" class="level3">
<h3 class="anchored" data-anchor-id="georeferencing">Georeferencing</h3>
<p>Georeferencing is the process of assigning a coordinate reference system (CRS) and geographic coordinates to an image that does not have them, e.g.&nbsp;a scanned paper map. It involves two stages: first defining <strong>control points</strong> (points on the map with known locations) and then defining the <strong>transformation</strong> used to fit the source map to the desired coordinate reference system. There are in turn two basic ways to define control points: by using known coordinates (e.g.&nbsp;from a grid, landmark, or cross-referencing with a table) or by matching features with another, already digitised, map of the same area. We will try both in this practical.</p>
<ol type="1">
<li>Add the map images to your Islay project and open it in QGIS.</li>
<li>Change the <strong>Project CRS</strong> to <code>OSGB36 / British National Grid</code> (EPSG:27700)
<ul>
<li>This is the projection used in the two Islay maps.</li>
</ul></li>
<li>Open the <strong>Georeferencer</strong> (<code>Layer → Georeferencer</code>)</li>
<li>Use the <code>Open Raster...</code> button to add <strong>islay_sites.jpg</strong> to the Georeferencer.</li>
</ol>
<p>Luckily, this map has some grid references included in the frame of the map. These reference the British National Grid and are in the format NRXXYY, where ‘NR’ is a map sheet and XX and YY are the easting and northing coordinates in kilometres. We can look up the geographic coordinates of the corners of these grid squares, for example at https://britishnationalgrid.uk/. It’s not explicitly stated, but let’s assume that the origin (lower left corner) of the map is at grid reference NR1540.</p>
<ol start="5" type="1">
<li>In a browser, open https://britishnationalgrid.uk/ and navigate to Islay</li>
<li>Under ‘grid reference’, change ‘six-figure’ to ‘four-figure’.</li>
<li>Back in the Georeferencer, select the <code>Add Point</code> tool and click on one of the corners of the grid squares. Then input its X and Y coordinates.
<ul>
<li>Refer back to the website from steps 5–6 to find these coordinates.</li>
</ul></li>
<li>Repeat step 7 until you have at least three control points.
<ul>
<li><strong>Q:</strong> What is the advantage of picking more than three points?</li>
</ul></li>
<li>Open the <code>Transformation Settings</code> window and tick ‘create world file only’
<ul>
<li>This means the image will not be ‘warped’, just have coordinates attached to it. We can do this because the source and target CRSes are the same (British National Grid).</li>
</ul></li>
<li>Click <code>Start Georeferencing</code>. If all goes well, you should now see a georeferenced version of the map in the main QGIS window.</li>
</ol>
<p>Now we will georeference the maps of the Islay coastline. Unfortunately these don’t have grid references, but since they’re of the same place, we can piggy-back off the work we’ve already done.</p>
<ol start="11" type="1">
<li>As before, load one of the coastline maps into the Georeferencer.
<ul>
<li>When asked, you do not need to save the control points from the previous steps.</li>
</ul></li>
<li>Pick a place on the coastline and add a control point, but this time, instead of entering coordinates, click the <code>From Map Canvas</code> button and click on the corresponding point on the map you have just georeferenced.</li>
<li>Repeat step 12 until you have at least three coordinates.</li>
<li>Repeat steps 9–10 and inspect the georeferenced map.
<ul>
<li>If it doesn’t fit well to the other maps, you may have to add or remove control points.</li>
<li>Generally you need more control points to get an accurate result when georeferencing this way – three is rarely sufficient.</li>
</ul></li>
<li>Repeat steps 11–14 for the remaining coastline maps.</li>
</ol>
<p>Export quick maps of your georeferenced images for your portfolio.</p>
</section>
<section id="digitising" class="level3">
<h3 class="anchored" data-anchor-id="digitising">Digitising</h3>
<p>Now we have the image georeferenced and displayed in QGIS like other layers, but if we are going to make full use of them, we need to turn them into vector data.</p>
<ol start="16" type="1">
<li>Create a new geopackage layer that we will use for the site data (<code>Layer → Create Layer</code>)
<ul>
<li>Pick a sensible database filename and table name; they can be the same.</li>
<li>The ‘geometry type’ should be ‘point’</li>
<li>The CRS should be <code>OSGB36 / British National Grid</code> (EPSG:27700)</li>
<li><strong>Add a field</strong> to contain the period assigned to the site; pick a sensible name and use ‘Text (string)’ type</li>
</ul></li>
<li><strong>Edit</strong> your new layer and use the <code>Add Point Feature</code> tool to create a point for each site.
<ul>
<li>You will be asked to fill in the period field you created; do so.</li>
<li>Remember to <strong>save</strong> the edits to your layer often and, when you are finished,</li>
</ul></li>
<li>Create a new geopackage layer that we will use for the coast data (<code>Layer → Create Layer</code>)
<ul>
<li>Pick a sensible database filename and table name; you can save all four layers in the same geopackage database if you wish.</li>
<li>The ‘geometry type’ should be ‘polygon’</li>
<li>The CRS should be <code>OSGB36 / British National Grid</code> (EPSG:27700)</li>
</ul></li>
<li>Digitise the coastline maps using the <code>Add Polygon Feature</code> tools.
<ul>
<li>For the lakes, you will need to turn on the <strong>advanced digitising toolbar</strong> and use the ‘add ring’ tool.</li>
<li>The coastline is the same across many images, so you can save time by copying polygons between layers and using the <code>reshape features</code> tool to change them.</li>
<li>On the 13000 BP map, make a seperate polygon for the ice sheet.</li>
</ul></li>
</ol>
<p>Export quick maps of your digitised layers for your portfolio.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data_sources.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Obtaining geospatial data</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./field_data.html" class="pagination-link">
        <span class="nav-page-text">Field data collection</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>