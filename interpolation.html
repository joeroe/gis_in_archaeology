<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>GIS in Archaeology [HS2022] - Interpolation &amp; density estimation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./raster_analysis.html" rel="next">
<link href="./field_data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">GIS in Archaeology [HS2022]</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./information.html">
 <span class="menu-text">Information</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tutorials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="./introduction.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Making maps</li>
        <li>
    <a class="dropdown-item" href="./theme_maps.html">
 <span class="dropdown-text">Thematic maps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./topographic_maps.html">
 <span class="dropdown-text">Topographic maps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./layout.html">
 <span class="dropdown-text">Map layout</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./design.html">
 <span class="dropdown-text">Map design</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Geospatial data</li>
        <li>
    <a class="dropdown-item" href="./data_management.html">
 <span class="dropdown-text">Data management</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./data_sources.html">
 <span class="dropdown-text">Obtaining geospatial data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./digitising.html">
 <span class="dropdown-text">Georeferencing &amp; digitising</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./field_data.html">
 <span class="dropdown-text">Field data collection</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Spatial analysis</li>
        <li>
    <a class="dropdown-item" href="./interpolation.html">
 <span class="dropdown-text">Interpolation &amp; density estimation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./raster_analysis.html">
 <span class="dropdown-text">Raster analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./movement_models.html">
 <span class="dropdown-text">Modelling movement</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./review.html">
 <span class="dropdown-text">Course review &amp; assignment workshop</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./assignments.html">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./bibliography.html">
 <span class="menu-text">Bibliography &amp; Further Reading</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Interpolation &amp; density estimation</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Making maps</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./theme_maps.html" class="sidebar-item-text sidebar-link">Thematic maps</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./topographic_maps.html" class="sidebar-item-text sidebar-link">Topographic maps</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./layout.html" class="sidebar-item-text sidebar-link">Map layout</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./design.html" class="sidebar-item-text sidebar-link">Map design</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Geospatial data</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_management.html" class="sidebar-item-text sidebar-link">Data management</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_sources.html" class="sidebar-item-text sidebar-link">Obtaining geospatial data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./digitising.html" class="sidebar-item-text sidebar-link">Georeferencing &amp; digitising</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./field_data.html" class="sidebar-item-text sidebar-link">Field data collection</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Spatial analysis</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interpolation.html" class="sidebar-item-text sidebar-link active">Interpolation &amp; density estimation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./raster_analysis.html" class="sidebar-item-text sidebar-link">Raster analysis</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./movement_models.html" class="sidebar-item-text sidebar-link">Modelling movement</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./review.html" class="sidebar-item-text sidebar-link">Course review &amp; assignment workshop</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link active" data-scroll-target="#prerequisites">Prerequisites</a></li>
  <li><a href="#practical" id="toc-practical" class="nav-link" data-scroll-target="#practical">Practical</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  </ul></li>
  <li><a href="#areal-statistics" id="toc-areal-statistics" class="nav-link" data-scroll-target="#areal-statistics">Areal statistics</a>
  <ul class="collapse">
  <li><a href="#kernel-density-estimation-heatmaps" id="toc-kernel-density-estimation-heatmaps" class="nav-link" data-scroll-target="#kernel-density-estimation-heatmaps">Kernel Density Estimation (‘heatmaps’)</a></li>
  <li><a href="#interpolation" id="toc-interpolation" class="nav-link" data-scroll-target="#interpolation">Interpolation</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/joeroe/gis_in_archaeology/blob/main/interpolation.qmd" class="toc-action">View source</a></p><p><a href="https://github.com/joeroe/gis_in_archaeology/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Interpolation &amp; density estimation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this session we will begin looking at spatial analysis, starting with techniques for the interpolation and density estimate of point pattern data.</p>
<section id="prerequisites" class="level2">
<h2 class="anchored" data-anchor-id="prerequisites">Prerequisites</h2>
<ul>
<li><a href="https://tube.switch.ch/videos/94a4f92e">Heatmaps</a> (Video, Martin Hinz)</li>
<li><a href="https://tube.switch.ch/videos/426a1e41">Interpolation</a> (Video, Martin Hinz) – 0:00 to 9:20</li>
</ul>
</section>
<section id="practical" class="level2">
<h2 class="anchored" data-anchor-id="practical">Practical</h2>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>Data generated in the previous session on <a href="./digitising.html">Georeferencing &amp; Digitising</a>:</p>
<ul>
<li><code>nasadem_islay</code> – NASADEM for the island of Islay</li>
<li><code>islay_sites</code> – point layer of sites on Islay
<ul>
<li><a href="islay/data/islay_sites.gpkg">islay_sites.gpkg</a> – the same layer with added site names and artefact counts</li>
</ul></li>
</ul>
</section>
</section>
<section id="areal-statistics" class="level2">
<h2 class="anchored" data-anchor-id="areal-statistics">Areal statistics</h2>
<p>One very simply way of aggregating point data into an area is to simply count the number of points in the area. This assumes that we know the area we are interested in advance. Let’s suppose we were interested in how many sites were found in the coastal (&lt;50 m a.s.l.), lowland (50–100 m a.s.l.) and highland (100+ m a.s.l.) zones of Islay.</p>
<ol type="1">
<li>First we need to generate polygons for the elevation zones we are interested. We will do this using <code>nasadem_islay</code> – make sure you have this in your project.</li>
<li>Use <code>Raster → Extraction → Contour</code> to generate contours from <code>nasadem_islay</code>.
<ul>
<li>Set the ‘Interval’ to <code>50</code>.</li>
<li>Under ‘advanced parameters’, set ‘additional command-line parameters’ to <code>-p</code>. This generates polygons instead of lines (the default).</li>
</ul></li>
<li>The resulting layer is not labelled by elevation zone, so add a field with this now.
<ul>
<li>This is easier if you first merge all the polygons over 100 m a.s.l. into one.</li>
</ul></li>
<li>Use the <strong>Count Points in Polygon</strong> tool (under <code>Vector → Analysis</code>) to count the number of points in each area.</li>
<li>Use the <strong>attribute table</strong> to inspect the result, then adjust the symbology of the layer to show it visually.
<ul>
<li><strong>Q:</strong> What does this tell us about site location patterns on Islay?</li>
</ul></li>
<li>Let’s calculate the <em>density</em> of sites in each area also. Using the <strong>field calculator</strong> (accessed via the attribute table), create a new field to calculate the number of sites per m^2.
<ul>
<li>Ensure the ‘output field type’ is set to <code>Decimal number (real)</code></li>
<li>Use the expression <code>"NUMPOINTS" / $area</code>, adjusting <code>"NUMPOINTS"</code> if you named the field containing the site counts something different.</li>
<li><strong>Q:</strong> Why is density more informative than an absolute count here?</li>
</ul></li>
</ol>
<p>Include a map showing site density by elevation zone in your portfolio.</p>
<section id="kernel-density-estimation-heatmaps" class="level3">
<h3 class="anchored" data-anchor-id="kernel-density-estimation-heatmaps">Kernel Density Estimation (‘heatmaps’)</h3>
<p>Kernel Density Estimation (KDE) is a method for calculating the density of points across a space. More formally, it assumes that these points are manifestations of a continuous <em>density function</em> across that space, and attempts to estimate this underlying ‘hidden field’ by moving a regular-sized window (the ‘kernel’) over it and counting the points within it. In more practical terms, the resulting ‘heatmaps’ show where there are more things and where there are less things, in a way that is easier to take in at a glance than a cloud of points. They are very useful both as a visualisation and analysis tool, especially when you’re dealing with a lof points.</p>
<p>One major caveat is that <strong>KDE is highly sensitive to the choice of kernel radius</strong>. There are several algorithms for choosing a kernel radius more objectively – but unfortunately none of them are implemented in QGIS! We must therefore bear in mind that generating heatmaps in QGIS is first and foremost a visualisation and exploratory tool. For more rigorous density analyses, it is probably better to switch to something like R.</p>
<ol type="1">
<li>Open the processing toolbox and find the <strong>heatmap</strong> tool, under ‘interpolation’.</li>
<li>Select <code>islay_sites</code> as the point layer. Leave the other options blank and click run.</li>
<li>Inspect the resulting map. Does it tell us anything meaningful about the density of sites? Repeat step 2, varying the value of radius, until you find something you are happy with.
<ul>
<li><strong>Q:</strong> How does the choice of radius affect the resulting heatmap?</li>
</ul></li>
<li>Generate three more heatmaps, one for each of the period categories in this dataset.
<ul>
<li>You can do this by generating new layers, or using the ‘Selected features only’ option of the Heatmap tool</li>
<li>Use the same radius for each</li>
<li><strong>Q:</strong> Can we see any differences in site densities between periods?</li>
</ul></li>
</ol>
<p>Include the three heatmaps generated in step 4 in your portfolio.</p>
</section>
<section id="interpolation" class="level3">
<h3 class="anchored" data-anchor-id="interpolation">Interpolation</h3>
<p>What if we are not interested just in where points are, but some quality about them? Interpolation is the process of taking a nominal (i.e.&nbsp;a description) or continuous variable (i.e.&nbsp;a number) recorded in specific locations and using this to estimate its value across a whole space. There are many techniques for doing this. We will look at three of the most common: Thiessen polygons (better known as Voronoi polygons outside of archaeology), Nearest Neighbour interpolation, and Inverse Distance Weighted (IDW) interpolation. Notably, we will not look at <em>kriging</em> (because it is not natively implemented in QGIS), though this is also amongst the most common.</p>
<section id="thiessen-polygons" class="level4">
<h4 class="anchored" data-anchor-id="thiessen-polygons">Thiessen polygons</h4>
<p>Thiessen polygons simply consider each place on the map as ‘belonging’ the point closest to it. They are what you get if you draw lines exactly in the middle of each pair of points, then join them up into polygons. They can be used to roughly interpolate nominal or continuous data.</p>
<ol type="1">
<li>Generate Thiessen polygons for <code>islay_sites</code> using the <strong>Voronoi polygons</strong> tool.
<ul>
<li>Vary the value of ‘buffer %’ until the resulting polygons cover the entire island.</li>
</ul></li>
<li><strong>Clip</strong> the resulting polygons to the island of Islay.</li>
<li>Alter the symbology to colour the polygons by period.
<ul>
<li><strong>Q:</strong> Why aren’t Thiessen polygons very informative for Islay?</li>
</ul></li>
</ol>
<p>Include a map of your Thiessen polygons in your portfolio.</p>
</section>
<section id="nearest-neighbour" class="level4">
<h4 class="anchored" data-anchor-id="nearest-neighbour">Nearest Neighbour</h4>
<p>Nearest Neighbour (NN) is the simplest form of raster-based interpolation. Essentially it is the Thiessen polygons, transferred onto a raster – which is in fact how you calculate it in QGIS (other software provides dedicated raster NN tools). It can be used for nominal or continuous data.</p>
<ol type="1">
<li>Use the <strong>Rasterize</strong> tool (<code>Raster → Conversion</code>) to convert your Thiessen polygons to a raster.
<ul>
<li>Since rasters can only contain numeric data, you will need to create a new field that encodes the period as a number (e.g.&nbsp;<code>Mesolithic</code>→<code>1</code>, <code>Mesolithic &amp; Later Prehistoric</code>→<code>2</code>, …)</li>
<li>Select the numeric-period field as the ‘Field to use for a burn-in value’.</li>
<li>Choose a sensible output raster size (e.g.&nbsp;1000x1000).</li>
</ul></li>
<li>Repeat step 1 with a field containing the number of artefacts.
<ul>
<li>You will need to <strong>download <code>islay_sites.gpkg</code></strong> for this – your version does not have the artefact counts!</li>
</ul></li>
</ol>
<p>Include maps of your nearest neighbour interpolations in your portfolio.</p>
</section>
<section id="idw" class="level4">
<h4 class="anchored" data-anchor-id="idw">IDW</h4>
<p>Inverse distance weighted (IDW) is a more sophisticated method appropriate for continuous data. It also produces a raster, but varies the output value according to the distance to the nearest point.</p>
<ol type="1">
<li>Use the <strong>IDW Interpolation</strong> tool (in the <strong>Processing Toolbox</strong>) on the islay_sites data.
<ul>
<li>Select artefact count as the ‘Interpolation attribute’</li>
<li>Select the study area (island of Islay) as the extent.</li>
<li>Choose a sensible output raster size (e.g.&nbsp;1000x1000).</li>
</ul></li>
<li>Repeat step 1 separately for each period.
<ul>
<li><strong>Q:</strong> Compare the result of this map to the density analysis above. What extra information does it provide?</li>
</ul></li>
</ol>
<p>Include maps of your IDW interpolations in your portfolio.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./field_data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Field data collection</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./raster_analysis.html" class="pagination-link">
        <span class="nav-page-text">Raster analysis</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>